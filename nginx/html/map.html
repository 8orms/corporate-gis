<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Просмотр растрового слоя - TEST2020-2021</title>
    <!-- Подключение библиотеки OpenLayers -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.14.1/css/ol.css" type="text/css">
    <script src="https://cdn.jsdelivr.net/gh/openlayers/openlayers.github.io@master/en/v6.14.1/build/ol.js"></script>
    <style>
        html, body {
            margin: 0;
            padding: 0;
            height: 100%;
            width: 100%;
        }
        .map-container {
            width: 100%;
            height: 100%;
            position: relative;
        }
        #map {
            width: 100%;
            height: 100%;
        }
        .map-title {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.8);
            padding: 10px 20px;
            border-radius: 5px;
            z-index: 1000;
            font-family: Arial, sans-serif;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .layer-switcher {
            position: absolute;
            top: 10px;
            right: 10px;
            background: white;
            padding: 10px;
            border-radius: 4px;
            z-index: 1000;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .layer-switcher label {
            display: block;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <div class="map-container">
        <div class="map-title">
            <h2>Просмотр слоя: TEST2020-2021</h2>
        </div>
        <div id="map"></div>
        <div class="layer-switcher">
            <h4>Базовые слои</h4>
            <label>
                <input type="radio" name="baselayer" value="osm" checked> OpenStreetMap
            </label>
            <label>
                <input type="radio" name="baselayer" value="none"> Без базового слоя
            </label>
            <h4>Растровые слои</h4>
            <label>
                <input type="checkbox" id="raster-layer" checked> TEST2020-2021
            </label>
        </div>
    </div>

    <script>
        // Инициализация карты при загрузке страницы
        window.onload = function() {
            // Создание источника для растрового слоя WMS
            var rasterSource = new ol.source.TileWMS({
                url: 'http://localhost/geoserver/vector/wms',
                params: {
                    'LAYERS': 'TEST2020-2021',
                    'TILED': true,
                    'FORMAT': 'image/png'
                },
                serverType: 'geoserver',
                crossOrigin: 'anonymous'
            });

            // Создание растрового слоя
            var rasterLayer = new ol.layer.Tile({
                source: rasterSource,
                title: 'TEST2020-2021',
                visible: true
            });

            // Базовый слой OSM
            var osmLayer = new ol.layer.Tile({
                source: new ol.source.OSM(),
                title: 'OpenStreetMap',
                visible: true
            });

            // Создание карты
            var map = new ol.Map({
                target: 'map',
                layers: [osmLayer, rasterLayer],
                view: new ol.View({
                    // Примерный центр России
                    center: ol.proj.fromLonLat([95, 65]),
                    zoom: 3
                })
            });

            // Обработчики событий для переключателей слоев
            document.querySelectorAll('input[name="baselayer"]').forEach(function(radio) {
                radio.addEventListener('change', function() {
                    if (this.value === 'osm') {
                        osmLayer.setVisible(true);
                    } else {
                        osmLayer.setVisible(false);
                    }
                });
            });

            document.getElementById('raster-layer').addEventListener('change', function() {
                rasterLayer.setVisible(this.checked);
            });

            // Добавление элементов управления
            map.addControl(new ol.control.ScaleLine());
            map.addControl(new ol.control.FullScreen());
            map.addControl(new ol.control.Zoom());
        };
    </script>
</body>
</html> 